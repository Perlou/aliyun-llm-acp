# 🎯 提示词工程 (Prompt Engineering)

> 📊 **考试占比**: 24% (~24 题)
>
> 🎯 **重要程度**: ⭐⭐⭐⭐⭐ 核心模块

## 📚 知识大纲

### 1. 提示词基础概念

#### 1.1 什么是 Prompt Engineering

- 通过优化输入提示词来引导大模型生成期望输出的技术
- 不改变模型参数，通过"沟通技巧"提升效果

#### 1.2 提示词框架要素

```
┌─────────────────────────────────────────────────┐
│ 完整提示词结构                                    │
├─────────────────────────────────────────────────┤
│ 1. 角色 (Role)        │ 定义 AI 的身份和专业领域   │
│ 2. 任务 (Task)        │ 明确需要完成的具体目标     │
│ 3. 背景 (Context)     │ 提供必要的背景信息         │
│ 4. 格式 (Format)      │ 指定输出的格式要求         │
│ 5. 约束 (Constraints) │ 设定限制条件和边界         │
│ 6. 示例 (Examples)    │ 提供参考示例 (Few-shot)   │
└─────────────────────────────────────────────────┘
```

### 2. 系统提示词 (System Prompt)

#### 2.1 作用

- 设定 AI 的角色和行为规范
- 定义回答风格和语气
- 约束输出范围和边界
- 贯穿整个对话会话

#### 2.2 最佳实践

```python
# 示例: 医疗咨询助手的 System Prompt
system_prompt = """
你是一位专业的医疗健康顾问。

## 角色定位
- 提供通用健康建议和医学知识科普
- 不提供诊断和处方建议

## 回答规范
- 使用通俗易懂的语言
- 重要信息用列表呈现
- 必须建议用户咨询专业医生

## 安全边界
- 不回答涉及具体药物剂量的问题
- 对紧急情况提示拨打急救电话
"""
```

### 3. 分隔符使用

#### 3.1 常见分隔符类型

| 分隔符  | 用途         | 示例                      |
| ------- | ------------ | ------------------------- |
| `###`   | 分隔不同部分 | `### 任务描述 ###`        |
| `"""`   | 包裹长文本   | `"""文章内容"""`          |
| `---`   | 分隔线       | `用户输入: ---`           |
| `<tag>` | XML 标签包裹 | `<context>背景</context>` |
| ```     | 代码块包裹   | 包裹代码或数据            |

#### 3.2 分隔符作用

- 清晰区分指令和内容
- 防止提示词注入攻击
- 提高模型对结构的理解

### 4. 提示词设计技巧

#### 4.1 Zero-shot vs Few-shot

```python
# Zero-shot: 无示例直接提问
prompt_zero = "将以下文本分类为正面或负面情感: '这个产品太棒了！'"

# Few-shot: 提供示例引导
prompt_few = """
将文本分类为正面或负面:

示例1: "非常满意!" → 正面
示例2: "太差劲了" → 负面

请分类: "这个产品太棒了！" →
"""
```

#### 4.2 思维链 (Chain of Thought)

```python
# 引导模型展示推理过程
prompt_cot = """
问题: 小明有 5 个苹果，给了小红 2 个，又买了 3 个，现在有几个？

请一步一步思考:
1. 初始数量: 5 个
2. 给出后: 5 - 2 = 3 个
3. 买入后: 3 + 3 = 6 个

答案: 6 个
"""
```

#### 4.3 ReAct 模式

```
思考 (Thought) → 行动 (Action) → 观察 (Observation) → 循环
```

### 5. API 参数详解

#### 5.1 核心参数

| 参数                | 范围 | 作用         | 推荐值                       |
| ------------------- | ---- | ------------ | ---------------------------- |
| `temperature`       | 0-2  | 控制随机性   | 代码生成: 0, 创意写作: 0.7-1 |
| `top_p`             | 0-1  | 核采样概率   | 通常 0.9                     |
| `max_tokens`        | 1-n  | 最大输出长度 | 按需设置                     |
| `presence_penalty`  | -2~2 | 话题多样性   | 0                            |
| `frequency_penalty` | -2~2 | 重复惩罚     | 0                            |

#### 5.2 temperature vs top_p

```python
# temperature: 控制输出分布的"平滑度"
# 低温度: 更确定，更保守
# 高温度: 更随机，更有创意

# top_p: 累积概率采样
# top_p=0.9 表示从概率累积到90%的候选词中采样
```

> ⚠️ **注意**: 一般不同时调整 temperature 和 top_p

### 6. 实战应用场景

#### 6.1 意图分类

```python
prompt = """
你是一个意图分类器。将用户输入分类为以下类别之一:
- 查询订单
- 退款申请
- 产品咨询
- 投诉建议
- 其他

用户输入: "{user_input}"
类别:
"""
```

#### 6.2 文档审阅

```python
prompt = """
审阅以下合同条款，检查是否存在以下问题:
1. 法律风险条款
2. 权责不对等条款
3. 模糊不清的表述

合同内容:
\"\"\"
{contract_text}
\"\"\"

审阅结果 (JSON格式):
"""
```

#### 6.3 内容生成

```python
prompt = """
根据以下信息生成产品描述:

产品: {product_name}
特点: {features}
目标用户: {target_users}

要求:
- 200字以内
- 突出核心卖点
- 包含行动号召

产品描述:
"""
```

---

## ✅ 知识点自测

1. [ ] System Prompt 的主要作用是什么?
2. [ ] 列举 3 种常用的分隔符
3. [ ] Zero-shot 和 Few-shot 的区别?
4. [ ] temperature 参数如何影响输出?
5. [ ] 设计一个意图分类的提示词

---

## 📝 考点速记卡

```
🔹 System Prompt = 角色 + 规范 + 边界
🔹 分隔符防注入: ###、"""、<tag>
🔹 Few-shot = 提供示例引导
🔹 CoT = 展示推理步骤
🔹 temperature ↓ = 确定性 ↑
🔹 top_p = 核采样概率阈值
```
